<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Ansible on reticulating splines</title><link>https://sbarbett.github.io/reticulating-splines/tags/ansible/</link><description>Recent content in Ansible on reticulating splines</description><generator>Hugo</generator><language>en</language><lastBuildDate>Sat, 22 Feb 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://sbarbett.github.io/reticulating-splines/tags/ansible/index.xml" rel="self" type="application/rss+xml"/><item><title>Playing With My PiHoles</title><link>https://sbarbett.github.io/reticulating-splines/posts/playing-with-my-piholes/</link><pubDate>Sat, 22 Feb 2025 00:00:00 +0000</pubDate><guid>https://sbarbett.github.io/reticulating-splines/posts/playing-with-my-piholes/</guid><description>&lt;h1 id="playing-with-my-piholes">Playing With My PiHoles&lt;/h1>
&lt;p>Last weekend, the PiHole team dropped a major update – PiHole v6. This version completely re-architects the project. They’ve updated the web server, overhauled the APIs and interface, and added a few new features. It looks pretty solid on paper, but I’m not ready to roll it out on my production Raspberry Pis until I’m sure all the kinks are worked out. From what I’m seeing on Reddit, there’s still plenty to fix. That won’t stop me from tinkering, though.&lt;/p></description></item><item><title>Ansible Playbooks for Proxmox and LXCs Part 5</title><link>https://sbarbett.github.io/reticulating-splines/posts/ansible-playbooks-for-proxmox-lxcs-pt5/</link><pubDate>Mon, 17 Feb 2025 00:00:00 +0000</pubDate><guid>https://sbarbett.github.io/reticulating-splines/posts/ansible-playbooks-for-proxmox-lxcs-pt5/</guid><description>&lt;h1 id="ansible-playbooks-for-proxmox-and-lxcs---part-5">Ansible Playbooks for Proxmox and LXCs - Part 5&lt;/h1>
&lt;p>This role is a complete disappointment and defies Ansible best practices. Philosophically speaking, a role should focus on doing a single task well and not be all over the place. Therefore, I&amp;rsquo;m going to split up the functionality we&amp;rsquo;ve created thus far into separate roles and move some things around.&lt;/p>
&lt;h2 id="adding-a-couple-things-to-the-vault">Adding a Couple Things to the Vault&lt;/h2>
&lt;p>All properties pertaining specifically to the Proxmox instance itself (not container settings) should be stored in the vault. Most of our Proxmox-related values are already in the vault, but I&amp;rsquo;d previously put the &lt;code>proxmox_api_host&lt;/code> and &lt;code>proxmox_node&lt;/code> in my role defaults. I&amp;rsquo;m simply moving those to the vault. Edit your vault with the following:&lt;/p></description></item><item><title>Ansible Playbooks for Proxmox and LXCs Part 4</title><link>https://sbarbett.github.io/reticulating-splines/posts/ansible-playbooks-for-proxmox-lxcs-pt4/</link><pubDate>Sun, 16 Feb 2025 00:00:00 +0000</pubDate><guid>https://sbarbett.github.io/reticulating-splines/posts/ansible-playbooks-for-proxmox-lxcs-pt4/</guid><description>&lt;h1 id="ansible-playbooks-for-proxmox-and-lxcs---part-4">Ansible Playbooks for Proxmox and LXCs - Part 4&lt;/h1>
&lt;p>I like to run stuff inside Docker (I know, some people have a visceral aversion to this. Whatever.), so in addition to the basic setup and tweaks, the most common thing I&amp;rsquo;m doing when I spin up a VM is &lt;a href="https://docs.docker.com/engine/install/debian/">going through the Docker setup process&lt;/a>. I&amp;rsquo;ve done this so many times I think I could install Docker blindfolded at this point—so let&amp;rsquo;s automate things.&lt;/p></description></item><item><title>Ansible Playbooks for Proxmox and LXCs Part 3</title><link>https://sbarbett.github.io/reticulating-splines/posts/ansible-playbooks-for-proxmox-lxcs-pt3/</link><pubDate>Fri, 14 Feb 2025 00:00:00 +0000</pubDate><guid>https://sbarbett.github.io/reticulating-splines/posts/ansible-playbooks-for-proxmox-lxcs-pt3/</guid><description>&lt;h1 id="ansible-playbooks-for-proxmox-and-lxcs---part-3">Ansible Playbooks for Proxmox and LXCs - Part 3&lt;/h1>
&lt;p>In this episode, we&amp;rsquo;re finally going to get into the LXC we&amp;rsquo;ve created and start configuring it with Ansible. We&amp;rsquo;ll add it dynamically as a host, SSH into it, install some software, and more.&lt;/p>
&lt;h2 id="adding-a-dynamic-host">Adding a Dynamic Host&lt;/h2>
&lt;p>In my last post, I outlined a strategy for acquiring the dynamically assigned IP address from the LXC once it&amp;rsquo;s been spun up. Now, we need to add that IP address to our Ansible hosts. In &lt;code>roles/proxmox_lxc/tasks/main.yml&lt;/code>, add the following:&lt;/p></description></item><item><title>Ansible Playbooks for Proxmox and LXCs Part 2</title><link>https://sbarbett.github.io/reticulating-splines/posts/ansible-playbooks-for-proxmox-lxcs-pt2/</link><pubDate>Wed, 12 Feb 2025 00:00:00 +0000</pubDate><guid>https://sbarbett.github.io/reticulating-splines/posts/ansible-playbooks-for-proxmox-lxcs-pt2/</guid><description>&lt;h1 id="ansible-playbooks-for-proxmox-and-lxcs---part-2">Ansible Playbooks for Proxmox and LXCs - Part 2&lt;/h1>
&lt;p>I want to continue building on the state-driven modularity of tasks in this Proxmox role. In addition to &lt;code>present&lt;/code> (the default state) and &lt;code>absent&lt;/code>, Proxmox supports the following states:&lt;/p>
&lt;ul>
&lt;li>&lt;code>started&lt;/code>&lt;/li>
&lt;li>&lt;code>stopped&lt;/code>&lt;/li>
&lt;li>&lt;code>restarted&lt;/code>&lt;/li>
&lt;li>&lt;code>template&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>By having the state variable drive the behavior, we implicitly declare the desired outcome. This aligns with Ansible&amp;rsquo;s idempotent design—where the playbook converges the system to the desired state instead of running a series of imperative commands.&lt;/p></description></item><item><title>Ansible Playbooks for Proxmox and LXCs Part 1</title><link>https://sbarbett.github.io/reticulating-splines/posts/ansible-playbooks-for-proxmox-lxcs/</link><pubDate>Sun, 09 Feb 2025 00:00:00 +0000</pubDate><guid>https://sbarbett.github.io/reticulating-splines/posts/ansible-playbooks-for-proxmox-lxcs/</guid><description>&lt;h1 id="ansible-playbooks-for-proxmox-and-lxcs---part-1">Ansible Playbooks for Proxmox and LXCs - Part 1&lt;/h1>
&lt;p>Over the past week, I&amp;rsquo;ve been tinkering with Ansible at work, and it got me thinking about how I can use this tool to make life easier in my homelab. Ansible is a way of turning tasks that usually require a bunch of complicated scripting into something more straightforward. Additionally, with collections, you can integrate directly with APIs without having to reinvent the wheel.&lt;/p></description></item></channel></rss>